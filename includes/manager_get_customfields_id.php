<?php
/**
* @ Project: ID Account System 1.5.0
* @ Author: Yplitgroup (c)2012
* @ Email: yplitgroup@gmail.com
* @ Website: http://lemon9x.com 
* @ Phone: 0166.26.26.009
* @ Project ID: 876609683c4c7e392848e94d9f62e149
**/
 // ############### CHECK ##############if( !defined('IS_MAIN') ) die(" Stop!!! ");$id_customfields = array();	// cache profile field categories	$pfcs = array(0);	$pfcs_result = $db->query("		SELECT * FROM " . TABLE_PREFIX . "profilefieldcategory		ORDER BY displayorder	");	while ($pfc = $db->sql_fetchrow($pfcs_result))	{		$pfcs["$pfc[profilefieldcategoryid]"] = $pfc['profilefieldcategoryid'];	}	$db->freeresult($pfcs_result);		// query profile fields	$profilefields = $db->query("		SELECT profilefieldid, profilefieldcategoryid, type, form, displayorder,			IF(required=2, 0, required) AS required,			editable, hidden, searchable, memberlist, data		FROM " . TABLE_PREFIX . "profilefield	");	if( $db->nums( $profilefields ) > 0 )	{		$forms = array(			0 => yplitgroupGetPhrase('edit_your_details','global'),			1 => yplitgroupGetPhrase('options','global') .': '. yplitgroupGetPhrase('log_in','global') .' / '. yplitgroupGetPhrase('privacy','global'),			2 => yplitgroupGetPhrase('options','global') .': '. yplitgroupGetPhrase('messaging','global') .' / '. yplitgroupGetPhrase('notification','global'),			3 => yplitgroupGetPhrase('options','global') .': '. yplitgroupGetPhrase('thread_viewing','global'),			4 => yplitgroupGetPhrase('options','global') .': '. yplitgroupGetPhrase('date') .' / '. yplitgroupGetPhrase('time','global'),			5 =>  yplitgroupGetPhrase('options','global') .': '. yplitgroupGetPhrase('other','global'),		);		$optionfields = array(			'required'   => yplitgroupGetPhrase('required','global'),			'editable'   => yplitgroupGetPhrase('editable','global'),			'hidden'     => yplitgroupGetPhrase('hidden','global'),			'searchable' => yplitgroupGetPhrase('searchable','global'),			'memberlist' => yplitgroupGetPhrase('members_list','global'),		);		$fields = array();		while ($profilefield = $db->sql_fetchrow($profilefields))		{			$profilefield['title'] = htmlspecialchars_uni( yplitgroupGetPhrase( 'field' . $profilefield['profilefieldid'] . '_title', 'cprofilefield' ) );			$fields["{$profilefield['form']}"]["$profilefield[profilefieldcategoryid]"]["{$profilefield['displayorder']}"]["{$profilefield['profilefieldid']}"] = $profilefield;		}		// sort by form and displayorder		foreach ($fields AS $profilefieldcategoryid => $profilefieldcategory)		{			ksort($fields["$profilefieldcategoryid"]);			foreach (array_keys($fields["$profilefieldcategoryid"]) AS $key)			{				ksort($fields["$profilefieldcategoryid"]["$key"]);			}		}		$numareas = sizeof($fields);		$areacount = 0;		$list_require = array();		foreach ($forms AS $formid => $formname)		{			if (is_array($fields["$formid"]))			{				foreach ($pfcs AS $pfcid)				{					if (is_array($fields["$formid"]["$pfcid"]))					{						foreach ($fields["$formid"]["$pfcid"] AS $displayorder => $profilefields)						{														foreach ($profilefields AS $_profilefieldid => $profilefield)							{								$fiels_options = array();								foreach ($optionfields AS $fieldname => $optionname)								{									if ($profilefield["$fieldname"])									{										$fiels_options[] = $optionname;									}								}									$id_customfields[] = $profilefield['profilefieldid'];							}						}					}				}			}		}	}	?>